"use strict";(self.webpackChunknebula=self.webpackChunknebula||[]).push([[671],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var u=a.createContext({}),s=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=s(e.components);return a.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=s(t),m=l,b=d["".concat(u,".").concat(m)]||d[m]||c[m]||r;return t?a.createElement(b,o(o({ref:n},p),{},{components:t})):a.createElement(b,o({ref:n},p))}));function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,o=new Array(r);o[0]=d;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:l,o[1]=i;for(var s=2;s<r;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9881:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return u},metadata:function(){return s},toc:function(){return p},default:function(){return d}});var a=t(7462),l=t(3366),r=(t(7294),t(3905)),o=["components"],i={sidebar_position:1},u="Tutorial Intro",s={unversionedId:"intro",id:"intro",isDocsHomePage:!1,title:"Tutorial Intro",description:"Let's discover Nebula in less than 2 minutes.",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/docs/intro",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"defaultSidebar",next:{title:"Overview",permalink:"/docs/basics/overview"}},p=[{value:"Getting Started",id:"getting-started",children:[{value:"Start up one node instance locally",id:"start-up-one-node-instance-locally",children:[]},{value:"Try to build",id:"try-to-build",children:[]},{value:"Docker images",id:"docker-images",children:[]},{value:"Kubernetes",id:"kubernetes",children:[]}]}],c={toc:p};function d(e){var n=e.components,i=(0,l.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},c,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"tutorial-intro"},"Tutorial Intro"),(0,r.kt)("p",null,"Let's discover ",(0,r.kt)("strong",{parentName:"p"},"Nebula in less than 2 minutes"),"."),(0,r.kt)("h2",{id:"getting-started"},"Getting Started"),(0,r.kt)("p",null,"Get started by ",(0,r.kt)("strong",{parentName:"p"},"running nebula on your localbox"),"."),(0,r.kt)("p",null,"Nebula repo contains pre-built binaries built from both Ubuntu 20.04 LTS and MacOS (M1) Big Sur.\n(We don't offer Windows built yet)"),(0,r.kt)("p",null,"All binaries are static linked, it should work fine on your linux box and Mac laptop. Otherwise you need need to rebuild nebula."),(0,r.kt)("p",null,"At nebula repo root, you can"),(0,r.kt)("h3",{id:"start-up-one-node-instance-locally"},"Start up one node instance locally"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./run.sh\n")),(0,r.kt)("p",null,"This script will detect current user's operation system and launch the service processes by choosing the right version of pre-built binaries.\nAfter this command, you can open browser, navigate to this address: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"  http://localhost:8088/\n")),(0,r.kt)("p",null,"Now, explore Nebula through ",(0,r.kt)("inlineCode",{parentName:"p"},"nebula UI")," with a preload dataset, if everything goes well, you should be able to see this:\n",(0,r.kt)("img",{alt:"Init UI",src:t(5201).Z})),(0,r.kt)("p",null,"Try to put keys and metrics in the ",(0,r.kt)("inlineCode",{parentName:"p"},"fields")," and see how it visualize the result of your query!\nFor example: see average weight and P50 weight by tag+flag combined keys when event equals 'N':\n",(0,r.kt)("img",{alt:"Simple Query",src:t(8067).Z})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Tip: This simple script (run.sh) also shows how Nebula server communicates with all available Nebula nodes, if you work with a customized deployment environment, you can wrap the way how to launch NodeServer and NebulaServer respectively. Otherwise you can continue reading how to use Dockers and Kubernetes for cluster deployment.")),(0,r.kt)("h3",{id:"try-to-build"},"Try to build"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./build.sh\n")),(0,r.kt)("p",null,"This script will launch either ",(0,r.kt)("inlineCode",{parentName:"p"},"build.linux.sh")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"build.mac.sh"),", both of them install pre-required softwares and launch the build process managed by ",(0,r.kt)("inlineCode",{parentName:"p"},"cmake"),".\nFor prerequisites installation - it uses ",(0,r.kt)("inlineCode",{parentName:"p"},"brew")," on MacOs while using ",(0,r.kt)("inlineCode",{parentName:"p"},"apt")," on Linux. (Tested version: ",(0,r.kt)("inlineCode",{parentName:"p"},"Ubuntu 20.04 LTS")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"MacOs Big Sur + M1 Chip"),").\nNote: there maybe changes needed if you build nebula on other untested platforms."),(0,r.kt)("p",null,"It will take some time if it's first time to build, after build is done, you will see all the binaries under ",(0,r.kt)("inlineCode",{parentName:"p"},"build")," directory."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"NodeServer: Nebula node could be deployed to any number of machines/nodes/pods."),(0,r.kt)("li",{parentName:"ul"},"NebulaServer: Nebula server is a single server communicating with all nodes."),(0,r.kt)("li",{parentName:"ul"},"configs: cluster configuration folder (examples: ",(0,r.kt)("inlineCode",{parentName:"li"},"cluster.yml")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"test.yml"),")")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Tip: for most of the time, the config yaml file is the only place you need to onboard your use cases, customize and scale your cluster. We will learn the config file in another chapter.")),(0,r.kt)("h3",{id:"docker-images"},"Docker images"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Tip: for maintainer, before build images, make sure we have all ",(0,r.kt)("strong",{parentName:"p"},"release")," binaries replaced.\nIf build using Google cloud machine, we can use scp to copy files, for example ",(0,r.kt)("inlineCode",{parentName:"p"},"gcloud compute scp vm1:~/nebula/build/NebulaServer ~/nebula/build/"),"\nTo push docker images to docker hub - run following steps on a linux box.")),(0,r.kt)("p",null,"We peoridically release all ",(0,r.kt)("inlineCode",{parentName:"p"},"3")," nebula docker images to docker hub under the public name ",(0,r.kt)("inlineCode",{parentName:"p"},"columns"),". They are:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"columns/nebula.server"),": Nebula server image (statically linked C++ binary)."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"columns/nebula.node"),": Nebula node image (statically linked C++ binary)."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"columns/nebula.web"),": Nebula Web UI image (NodeJS container).")),(0,r.kt)("p",null,"Please check the timestamp and commit hash to see what changes included from Nebula master repo.\nFeel free to use ",(0,r.kt)("inlineCode",{parentName:"p"},"docker pull")," to download them from ",(0,r.kt)("a",{parentName:"p",href:"https://hub.docker.com/u/columns"},"docker hub"),"."),(0,r.kt)("p",null,"Currently, Nebula supports two ways for server and nodes to discover each other:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Confgiure node list in cluster config file (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"cluster.yml"),") if the node list is static fixed."),(0,r.kt)("li",{parentName:"ol"},"Configure server to be a fixed server (unchanged IP address), and pass the address to all nodes.")),(0,r.kt)("p",null,"For details, please see ",(0,r.kt)("a",{parentName:"p",href:"/docs/basics/discovery"},"Nebula Discovery")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Tip: (to Nebula maintainer), the docker hub account is associated with ",(0,r.kt)("a",{parentName:"p",href:"mailto:columns.ai@gmail.com"},"columns.ai@gmail.com")," (username=columns,password=",(0,r.kt)("a",{parentName:"p",href:"mailto:p...@w..."},"p...@w..."),"),\nplease use steps to release new images:"),(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},"Login: ",(0,r.kt)("inlineCode",{parentName:"li"},"sudo docker login")," to log in before push new images."),(0,r.kt)("li",{parentName:"ol"},"Build: after login, use ",(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose")," tool to build up all images locally.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"cd ",(0,r.kt)("inlineCode",{parentName:"li"},"src/service"),", where docker-compose.yaml is located."),(0,r.kt)("li",{parentName:"ul"},"run ",(0,r.kt)("inlineCode",{parentName:"li"},"sudo docker-compose build")))),(0,r.kt)("li",{parentName:"ol"},"Tag & Publish: tag the local built images and push to ",(0,r.kt)("a",{parentName:"li",href:"https://hub.docker.com/u/columns"},"docker hub"),".",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"sudo docker tag nebula/web columns/nebula.web && sudo docker push columns/nebula.web"),(0,r.kt)("li",{parentName:"ul"},"sudo docker tag nebula/server columns/nebula.server && sudo docker push columns/nebula.server"),(0,r.kt)("li",{parentName:"ul"},"sudo docker tag nebula/node columns/nebula.node && sudo docker push columns/nebula.node"))))),(0,r.kt)("h3",{id:"kubernetes"},"Kubernetes"),(0,r.kt)("p",null,"Suppose you already have a kubernetes cluster. Follow the steps below to deploy nebula in your cluster and access it from your localhost."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a configuration file nebula.yaml.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'cat > nebula.yaml <<EOF\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nebula-server\nspec:\n  selector:\n     matchLabels:\n       app: nebula-server\n  template:\n    metadata:\n      labels:\n        app: nebula-server\n    spec:\n      containers:\n        - name: nebula-web\n          image: columns/nebula.web\n          env:\n          - name: NS_ADDR\n            value: "localhost:9190"\n          - name: NODE_PORT\n            value: "8088"\n        - name: nebula-server\n          image: columns/nebula.server\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: nebula\nspec:\n  type: NodePort\n  selector:\n    app: nebula-server\n  ports:\n    - port: 9190\n      name: server\n      targetPort: 9190\n    - port: 8088\n      name: web\n      targetPort: 8088\n      nodePort: 30008\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nebula-node\nspec:\n  replicas: 2\n  selector:\n     matchLabels:\n       app: nebula-node\n  template:\n    metadata:\n      labels:\n        app: nebula-node\n    spec:\n      containers:\n        - name: nebula-node\n          image: columns/nebula.node\n          env:\n          - name: NSERVER\n            value: "nebula:9190"\nEOF\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create resources by applying nebula.yaml")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f nebula.yaml\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Use port forwarding to view nebula UI from your browser.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl port-forward service/nebula 8088:8088\n")),(0,r.kt)("p",null,'Now open http://localhost:8088 to play with nebula UI. You can scale up by simply increasing "replicas" of the deplyment nebula-node in nebula.yaml and running ',(0,r.kt)("inlineCode",{parentName:"p"},"kubectl apply -f nebula.yaml")," again."))}d.isMDXComponent=!0},5201:function(e,n,t){n.Z=t.p+"assets/images/init-e26a9555a3c78389d85ec9f3b06dce61.png"},8067:function(e,n,t){n.Z=t.p+"assets/images/simple_query-1ed32ccd9aa2cf4677ea827dd006c2ec.png"}}]);